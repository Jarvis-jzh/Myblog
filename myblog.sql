/*
 Navicat Premium Data Transfer

 Source Server         : localhost
 Source Server Type    : MySQL
 Source Server Version : 80015
 Source Host           : localhost:3306
 Source Schema         : myblog

 Target Server Type    : MySQL
 Target Server Version : 80015
 File Encoding         : 65001

 Date: 30/04/2020 15:25:37
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for archive
-- ----------------------------
DROP TABLE IF EXISTS `archive`;
CREATE TABLE `archive`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `archive_name` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '归档日期',
  `archive_count` tinyint(1) NOT NULL DEFAULT 1 COMMENT '归档日期的文章数量',
  `create_time` datetime(0) NOT NULL,
  `update_time` datetime(0) NOT NULL,
  `deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '文章归档' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of archive
-- ----------------------------
INSERT INTO `archive` VALUES (2, '2020年01月', 1, '2020-02-08 15:02:06', '2020-02-08 15:02:06', 0);
INSERT INTO `archive` VALUES (3, '2020年02月', 35, '2020-02-28 20:32:29', '2020-02-28 20:32:29', 0);
INSERT INTO `archive` VALUES (4, '2020年03月', 1, '2020-03-03 20:58:23', '2020-03-03 20:58:23', 0);
INSERT INTO `archive` VALUES (5, '2020年04月', 1, '2020-04-13 15:35:08', '2020-04-13 15:35:08', 0);

-- ----------------------------
-- Table structure for article
-- ----------------------------
DROP TABLE IF EXISTS `article`;
CREATE TABLE `article`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `article_id` bigint(20) NOT NULL COMMENT '文章id',
  `author` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '文章作者',
  `original_author` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '文章原作者',
  `article_title` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '文章名',
  `article_content` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '文章内容',
  `article_tags` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '文章标签',
  `article_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '文章类型',
  `article_categories` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '博客分类',
  `create_time` datetime(0) NOT NULL COMMENT '创建时间',
  `update_time` datetime(0) NOT NULL COMMENT '更新时间',
  `article_url` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '原文链接\r\n转载：则是转载的链接\r\n原创：则是在本博客中的链接',
  `article_tabloid` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '文章摘要',
  `deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 213 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '文章' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of article
-- ----------------------------
INSERT INTO `article` VALUES (3, 1582198454, '夏末', '夏末', 'ssd', 'sdf', '测试5', '原创', 'SpringBoot', '2020-01-20 19:34:14', '2020-02-20 19:34:14', 'http://www.jzh.plus/article/1582198454', 'sdf', 0);
INSERT INTO `article` VALUES (6, 1582206398, '夏末', '夏末', '测试', '#### 高中我还算是那种挺努力的人，有过坚持早起去教室刷阅读理解的疲惫，也有过傍晚教学楼熄灯才收拾准备回寝室的心酸，但是却始终得不到自己想要的成绩。高中对于我来说目标就是能进年级前1000(年级大概2200人)，然而直到高考前的最后一次考试都没有机会实现我的目标。\n\n#### 也许是上帝都看不下去了，最终在高考满足了我的愿望。我对于大学没有做更多的选择，因为自身原因，我也别无选择。最终以556分进入西南石油大学的物联网工程专业，成为了一个我现在既讨厌又无奈的程序猿。\n\n之所以说大学确实可以是轻松的，因为每个人的大学都有很多选择的过法，从一开始选择了一条道路，就已经没有回头的选择了。\n\n至少在我身边的许多人都选择了轻松的度过大学，每天的烦恼就是在于又要早起上这门数据库原理课，又或者是忙于Java实验作业，除此之外就是在寝室中悠然的打着游戏。相信大学之前许多人都是这么看待大学的，我也不例外。\n\n还记得那是开学的某个晚自习，有许多学生会和社团来教室招新，我也是在那时认识了新媒体和翼灵物联网工作室(以下简称团队)，新媒体是负责计科院微信公众号图文的编写与推送，我当时有幸加入了其他，负责其中的图文的撰写，不过像我这种语文功底实在是笨拙的人来说，是有点为难我了。不过那学期我也因此结识了不少的朋友。\n\n在我大学四年中对我影响最大的就是翼灵，这是个什么样的组织呢？', '测试,测试2,测试3', '原创', '我的故事', '2020-02-20 21:46:39', '2020-02-20 21:46:39', 'http://www.jzh.plus/article/1582206398', '高中我还算是那种挺努力的人，有过坚持早起去教室刷阅读理解的疲惫，也有过傍晚教学楼熄灯才收拾准备回寝室的心酸，但是却始终得不到自己想要的成绩。高中对于我来说目标就是能进年级前1000(年级大概2200人)，然而直到高考前的最后一次考试都没有机会实现我的目标。也许是上帝都看不下去了，最终在高考满足了我的愿望。我对于大学没有做更多的选择，因为自身原因，我也别无选择。最终以556分进入西南石油大学的...', 0);
INSERT INTO `article` VALUES (7, 1582207381, '夏末', '夏末', '测试', '#### 高中我还算是那种挺努力的人，有过坚持早起去教室刷阅读理解的疲惫，也有过傍晚教学楼熄灯才收拾准备回寝室的心酸，但是却始终得不到自己想要的成绩。高中对于我来说目标就是能进年级前1000(年级大概2200人)，然而直到高考前的最后一次考试都没有机会实现我的目标。\n\n#### 也许是上帝都看不下去了，最终在高考满足了我的愿望。我对于大学没有做更多的选择，因为自身原因，我也别无选择。最终以556分进入西南石油大学的物联网工程专业，成为了一个我现在既讨厌又无奈的程序猿。\n\n之所以说大学确实可以是轻松的，因为每个人的大学都有很多选择的过法，从一开始选择了一条道路，就已经没有回头的选择了。\n\n至少在我身边的许多人都选择了轻松的度过大学，每天的烦恼就是在于又要早起上这门数据库原理课，又或者是忙于Java实验作业，除此之外就是在寝室中悠然的打着游戏。相信大学之前许多人都是这么看待大学的，我也不例外。\n\n还记得那是开学的某个晚自习，有许多学生会和社团来教室招新，我也是在那时认识了新媒体和翼灵物联网工作室(以下简称团队)，新媒体是负责计科院微信公众号图文的编写与推送，我当时有幸加入了其他，负责其中的图文的撰写，不过像我这种语文功底实在是笨拙的人来说，是有点为难我了。不过那学期我也因此结识了不少的朋友。\n\n在我大学四年中对我影响最大的就是翼灵，这是个什么样的组织呢？', '测试2', '原创', '我的故事', '2020-02-20 22:03:01', '2020-02-20 22:03:01', 'http://www.jzh.plus/article/1582207381', '高中我还算是那种挺努力的人，有过坚持早起去教室刷阅读理解的疲惫，也有过傍晚教学楼熄灯才收拾准备回寝室的心酸，但是却始终得不到自己想要的成绩。高中对于我来说目标就是能进年级前1000(年级大概2200人)，然而直到高考前的最后一次考试都没有机会实现我的目标。也许是上帝都看不下去了，最终在高考满足了我的愿望。我对于大学没有做更多的选择，因为自身原因，我也别无选择。最终以556分进入西南石油大学的...', 0);
INSERT INTO `article` VALUES (8, 1582207401, '夏末', '夏末', '测试', '#### 高中我还算是那种挺努力的人，有过坚持早起去教室刷阅读理解的疲惫，也有过傍晚教学楼熄灯才收拾准备回寝室的心酸，但是却始终得不到自己想要的成绩。高中对于我来说目标就是能进年级前1000(年级大概2200人)，然而直到高考前的最后一次考试都没有机会实现我的目标。\n\n#### 也许是上帝都看不下去了，最终在高考满足了我的愿望。我对于大学没有做更多的选择，因为自身原因，我也别无选择。最终以556分进入西南石油大学的物联网工程专业，成为了一个我现在既讨厌又无奈的程序猿。\n\n之所以说大学确实可以是轻松的，因为每个人的大学都有很多选择的过法，从一开始选择了一条道路，就已经没有回头的选择了。\n\n至少在我身边的许多人都选择了轻松的度过大学，每天的烦恼就是在于又要早起上这门数据库原理课，又或者是忙于Java实验作业，除此之外就是在寝室中悠然的打着游戏。相信大学之前许多人都是这么看待大学的，我也不例外。\n\n还记得那是开学的某个晚自习，有许多学生会和社团来教室招新，我也是在那时认识了新媒体和翼灵物联网工作室(以下简称团队)，新媒体是负责计科院微信公众号图文的编写与推送，我当时有幸加入了其他，负责其中的图文的撰写，不过像我这种语文功底实在是笨拙的人来说，是有点为难我了。不过那学期我也因此结识了不少的朋友。\n\n在我大学四年中对我影响最大的就是翼灵，这是个什么样的组织呢？', '测试4', '原创', '我的故事', '2020-02-20 22:03:21', '2020-02-20 22:03:21', 'http://www.jzh.plus/article/1582207401', '高中我还算是那种挺努力的人，有过坚持早起去教室刷阅读理解的疲惫，也有过傍晚教学楼熄灯才收拾准备回寝室的心酸，但是却始终得不到自己想要的成绩。高中对于我来说目标就是能进年级前1000(年级大概2200人)，然而直到高考前的最后一次考试都没有机会实现我的目标。也许是上帝都看不下去了，最终在高考满足了我的愿望。我对于大学没有做更多的选择，因为自身原因，我也别无选择。最终以556分进入西南石油大学的...', 0);
INSERT INTO `article` VALUES (9, 1582260126, '夏末', '夏末', '测试测试', '# 测试测试\n## 测试测试\n### 测试测试\n测试测试测试测试测试测试测试测试\n测试测试测试测试测试测试\n测试测试测试测试测试测试\n测试测试\n测试测试', '测试12', '原创', '我的故事', '2020-02-21 12:42:07', '2020-02-21 12:42:07', 'http://www.jzh.plus/article/1582260126', '测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试...', 0);
INSERT INTO `article` VALUES (10, 1582260489, '夏末', '夏末', '测试测试', '# 测试测试\n## 测试测试\n### 测试测试\n测试测试测试测试测试测试测试测试\n测试测试测试测试测试测试\n测试测试测试测试测试测试\n测试测试\n测试测试', '测试3', '原创', '我的故事', '2020-02-21 12:48:10', '2020-02-21 12:48:10', 'http://www.jzh.plus/article/1582260489', '测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试...', 0);
INSERT INTO `article` VALUES (11, 1582444393, '夏末', '测试', '测试测试测试', '# 测试\n\n## 柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂\n\n柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂\n\n## 柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂\n\n柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂\n\n## 柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂\n\n柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂', '测试,测试2,测试3', '转载', '我的故事', '2020-02-23 15:53:14', '2020-02-23 15:53:14', 'www.baidu.com', '测试柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂柱面干挂石材柱面干挂石材柱面干挂石材神鼎飞丹砂...', 0);
INSERT INTO `article` VALUES (12, 1582544393, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\n> 文字不够，图片来凑。\n\n## 前言\n#### 为什么想要搭建这个博客？\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\n\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\n\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\n\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\n\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\n\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\n\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\n\n#### 文章概述\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\n- 如何从零开始，使用Springboot开发项目\n- 开发前的一些准备工作，以及思考项目整体结构与思路\n- 记录开发过程中遇到的一些难题以及bug\n- 总结目前博客网站的一些优缺点\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\n\n## 页面展示\n\n##### 首页展示\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\n<br>\n##### 文章编辑\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\n<br>\n##### 后台管理\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\n<br>\n##### 用户个人中心\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\n\n## 项目需求\n#### 项目背景\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\n\n#### 功能需求\n###### 主页\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\n\n- 能够以分类形式查看文章\n\n- 能够以时间列表方式归档文章\n\n- 可实现通过标签查找所有相关文章\n\n- 个人介绍、联系方式\n\n- 博客网站更新记录\n\n- 友链链接\n\n###### 后台管理\n- 网站仪表盘，记录网站访客量情况\n\n- 文章管理\n1.分页展示文章信息\n2.可对文章进行再编辑以及删除文章\n\n- 发布文章\n1.使用markdown编辑器，支持插入代码，插入图片等功能\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\n\n- 分类管理，支持增加、删除、修改分类\n\n- 友情链接\n1.支持增加友情链接\n2.支持删除友情链接\n\n- 反馈信息管理，可查看用户反馈信息\n\n#### 安装部署需求\n- 可以使用docker方式部署，也可支持-jar方式\n- 使用springboot自带方式打包\n\n#### 非功能需求\n##### 性能需求\n- 首页响应时间不超过2秒钟\n- 文章页响应时间不超过3秒钟\n\n## 项目设计\n\n#### 总体设计\n- **本项目用到的技术和框架**\n1.项目构建：Maven\n2.web框架：Springboot\n3.数据库ORM：Mybatis\n4.数据库连接池： HikariCP \n5.分页插件：PageHelper\n6.数据库：MySql\n7.缓存：Redis\n8.前端模板：Thymeleaf\n9.文章展示：Editor.md\n\n- **本项目中的关键点**\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\n\n- **环境**\n\n|  工具 | 名称  |\n| ------------ | ------------ |\n| 开发工具  | IDEA  |\n|  语言 | JDK1.8、HTML、css、js  |\n| 数据库  | Mysql5.6  |\n| 项目框架  | SSM  |\n| ORM  | Mybatis  |\n| 安全框架  | SpringSecurity  |\n| 缓存  | Redis  |\n| 项目构建  | Maven  |\n| 运行环境  | 阿里云Centos7  |\n\n#### 结构设计\n\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\n\n## 业务设计\n#### 发布文章流程\n\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\n\n#### 登录流程\n\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\n\n#### 用户个人资料修改流程\n\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\n\n## 打包、部署和运行\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\n\n## 数据设计\n\n###### 用户表：user\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\n| id  | int  |  11 |  true |  true | 主键，自增  |\n| phone  | varchar  | 255  | false  | true  | 手机号  |\n| username  | varchar  | 255  |  false | true  |  用户名 |\n| password  |  varchar |  255 |  false | true  | 密码  |\n| gender  | char  | 50  | false  |  true | 性别  |\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\n| birthday  |  char | 100  |  false | false  | 生日  |\n| email  | varchar  | 255  | false  | false  | 邮箱  |\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\n\n###### 文章表：article\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\n| id  | int  |  11 |  true |  true | 主键，自增  |\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\n| author  | varchar  | 255  |  false | true  |  作者 |\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\n\n###### 评论记录表：comment_record\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\n| pId  | bigint  | 20  | false  | true  | 父id  |\n| articleId  | bigint  | 20  |  false | true  |  文章id |\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\n| answererId  | int  | 11  | false  |  true | 评论者id  |\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\n\n## 开发流程\n###### 数据库CRUD\n- controller层中编写前端接口，接收前端参数\n- service层中编写所需业务接口，供controller层调用\n- 实现service层中的接口，并注入mapper层中的sql接口\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\n\n###### 页面与展示\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\n\n###### 其他功能\n- 使用lazyload插件实现页面图片懒加载\n- 后台实时记录当天访客量，便于了解博客日常访问量\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\n\n###### 网站建设\n- 服务器选用的是阿里云centos7\n- 域名是阿里云上购买的.cn的域名\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\n\n## 总结\n#### 开发中遇到的难点\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\n\n#### 博客网站优缺点\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\n- 后端部分明确的分工有利于项目的理解与维护\n\n#### 项目整体优化\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\n\n#### 未来需增加的功能\n- 增加文章分享至QQ、微信、微博中功能\n- 用户可在线写文章功能\n- 用户收藏文章功能\n\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\n\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。\n', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 21:39:14', '2020-02-26 21:39:14', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (13, 568656770, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站1', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\n> 文字不够，图片来凑。\n\n## 前言\n#### 为什么想要搭建这个博客？\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\n\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\n\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\n\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\n\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\n\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\n\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\n\n#### 文章概述\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\n- 如何从零开始，使用Springboot开发项目\n- 开发前的一些准备工作，以及思考项目整体结构与思路\n- 记录开发过程中遇到的一些难题以及bug\n- 总结目前博客网站的一些优缺点\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\n\n## 页面展示\n\n##### 首页展示\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\n<br>\n##### 文章编辑\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\n<br>\n##### 后台管理\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\n<br>\n##### 用户个人中心\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\n\n## 项目需求\n#### 项目背景\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\n\n#### 功能需求\n###### 主页\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\n\n- 能够以分类形式查看文章\n\n- 能够以时间列表方式归档文章\n\n- 可实现通过标签查找所有相关文章\n\n- 个人介绍、联系方式\n\n- 博客网站更新记录\n\n- 友链链接\n\n###### 后台管理\n- 网站仪表盘，记录网站访客量情况\n\n- 文章管理\n1.分页展示文章信息\n2.可对文章进行再编辑以及删除文章\n\n- 发布文章\n1.使用markdown编辑器，支持插入代码，插入图片等功能\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\n\n- 分类管理，支持增加、删除、修改分类\n\n- 友情链接\n1.支持增加友情链接\n2.支持删除友情链接\n\n- 反馈信息管理，可查看用户反馈信息\n\n#### 安装部署需求\n- 可以使用docker方式部署，也可支持-jar方式\n- 使用springboot自带方式打包\n\n#### 非功能需求\n##### 性能需求\n- 首页响应时间不超过2秒钟\n- 文章页响应时间不超过3秒钟\n\n## 项目设计\n\n#### 总体设计\n- **本项目用到的技术和框架**\n1.项目构建：Maven\n2.web框架：Springboot\n3.数据库ORM：Mybatis\n4.数据库连接池： HikariCP \n5.分页插件：PageHelper\n6.数据库：MySql\n7.缓存：Redis\n8.前端模板：Thymeleaf\n9.文章展示：Editor.md\n\n- **本项目中的关键点**\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\n\n- **环境**\n\n|  工具 | 名称  |\n| ------------ | ------------ |\n| 开发工具  | IDEA  |\n|  语言 | JDK1.8、HTML、css、js  |\n| 数据库  | Mysql5.6  |\n| 项目框架  | SSM  |\n| ORM  | Mybatis  |\n| 安全框架  | SpringSecurity  |\n| 缓存  | Redis  |\n| 项目构建  | Maven  |\n| 运行环境  | 阿里云Centos7  |\n\n#### 结构设计\n\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\n\n## 业务设计\n#### 发布文章流程\n\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\n\n#### 登录流程\n\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\n\n#### 用户个人资料修改流程\n\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\n\n## 打包、部署和运行\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\n\n## 数据设计\n\n###### 用户表：user\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\n| id  | int  |  11 |  true |  true | 主键，自增  |\n| phone  | varchar  | 255  | false  | true  | 手机号  |\n| username  | varchar  | 255  |  false | true  |  用户名 |\n| password  |  varchar |  255 |  false | true  | 密码  |\n| gender  | char  | 50  | false  |  true | 性别  |\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\n| birthday  |  char | 100  |  false | false  | 生日  |\n| email  | varchar  | 255  | false  | false  | 邮箱  |\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\n\n###### 文章表：article\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\n| id  | int  |  11 |  true |  true | 主键，自增  |\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\n| author  | varchar  | 255  |  false | true  |  作者 |\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\n\n###### 评论记录表：comment_record\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\n| pId  | bigint  | 20  | false  | true  | 父id  |\n| articleId  | bigint  | 20  |  false | true  |  文章id |\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\n| answererId  | int  | 11  | false  |  true | 评论者id  |\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\n\n## 开发流程\n###### 数据库CRUD\n- controller层中编写前端接口，接收前端参数\n- service层中编写所需业务接口，供controller层调用\n- 实现service层中的接口，并注入mapper层中的sql接口\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\n\n###### 页面与展示\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\n\n###### 其他功能\n- 使用lazyload插件实现页面图片懒加载\n- 后台实时记录当天访客量，便于了解博客日常访问量\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\n\n###### 网站建设\n- 服务器选用的是阿里云centos7\n- 域名是阿里云上购买的.cn的域名\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\n\n## 总结\n#### 开发中遇到的难点\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\n\n#### 博客网站优缺点\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\n- 后端部分明确的分工有利于项目的理解与维护\n\n#### 项目整体优化\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\n\n#### 未来需增加的功能\n- 增加文章分享至QQ、微信、微博中功能\n- 用户可在线写文章功能\n- 用户收藏文章功能\n\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\n\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-03-01 22:19:45', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (14, 601721459, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站2', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (15, 556518362, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站3', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (16, 401030242, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站4', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (17, 224281193, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站5', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 1);
INSERT INTO `article` VALUES (18, 892574672, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站6', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 1);
INSERT INTO `article` VALUES (19, 256706394, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站7', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (20, 605552187, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站8', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (21, 779153056, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站9', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (22, 304655463, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站10', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (23, 527640977, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站11', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (24, 423311292, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站12', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (25, 185749892, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站13', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (26, 782678195, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站14', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (27, 178340894, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站15', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (28, 527584489, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站16', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (29, 404486869, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站17', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (30, 585397355, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站18', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (31, 329076642, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站19', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (32, 466164454, '夏末', '张海洋', 'SpringBoot之从零搭建博客网站20', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)\r\n> 文字不够，图片来凑。\r\n\r\n## 前言\r\n#### 为什么想要搭建这个博客？\r\n我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...\r\n\r\n于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~\r\n\r\n就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。\r\n\r\n自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。\r\n\r\n一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~\r\n\r\n6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。\r\n\r\n> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了\r\n\r\n#### 文章概述\r\n- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心\r\n- 如何从零开始，使用Springboot开发项目\r\n- 开发前的一些准备工作，以及思考项目整体结构与思路\r\n- 记录开发过程中遇到的一些难题以及bug\r\n- 总结目前博客网站的一些优缺点\r\n- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能\r\n\r\n## 页面展示\r\n\r\n##### 首页展示\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)\r\n<br>\r\n##### 文章编辑\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)\r\n<br>\r\n##### 后台管理\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)\r\n<br>\r\n##### 用户个人中心\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)\r\n\r\n## 项目需求\r\n#### 项目背景\r\n对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。\r\n\r\n#### 功能需求\r\n###### 主页\r\n- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要\r\n\r\n- 能够以分类形式查看文章\r\n\r\n- 能够以时间列表方式归档文章\r\n\r\n- 可实现通过标签查找所有相关文章\r\n\r\n- 个人介绍、联系方式\r\n\r\n- 博客网站更新记录\r\n\r\n- 友链链接\r\n\r\n###### 后台管理\r\n- 网站仪表盘，记录网站访客量情况\r\n\r\n- 文章管理\r\n1.分页展示文章信息\r\n2.可对文章进行再编辑以及删除文章\r\n\r\n- 发布文章\r\n1.使用markdown编辑器，支持插入代码，插入图片等功能\r\n2.文章可选择分类和标签，以及转载文章支持链接原作者文章\r\n\r\n- 分类管理，支持增加、删除、修改分类\r\n\r\n- 友情链接\r\n1.支持增加友情链接\r\n2.支持删除友情链接\r\n\r\n- 反馈信息管理，可查看用户反馈信息\r\n\r\n#### 安装部署需求\r\n- 可以使用docker方式部署，也可支持-jar方式\r\n- 使用springboot自带方式打包\r\n\r\n#### 非功能需求\r\n##### 性能需求\r\n- 首页响应时间不超过2秒钟\r\n- 文章页响应时间不超过3秒钟\r\n\r\n## 项目设计\r\n\r\n#### 总体设计\r\n- **本项目用到的技术和框架**\r\n1.项目构建：Maven\r\n2.web框架：Springboot\r\n3.数据库ORM：Mybatis\r\n4.数据库连接池： HikariCP \r\n5.分页插件：PageHelper\r\n6.数据库：MySql\r\n7.缓存：Redis\r\n8.前端模板：Thymeleaf\r\n9.文章展示：Editor.md\r\n\r\n- **本项目中的关键点**\r\n1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。\r\n2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。\r\n3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。\r\n\r\n- **环境**\r\n\r\n|  工具 | 名称  |\r\n| ------------ | ------------ |\r\n| 开发工具  | IDEA  |\r\n|  语言 | JDK1.8、HTML、css、js  |\r\n| 数据库  | Mysql5.6  |\r\n| 项目框架  | SSM  |\r\n| ORM  | Mybatis  |\r\n| 安全框架  | SpringSecurity  |\r\n| 缓存  | Redis  |\r\n| 项目构建  | Maven  |\r\n| 运行环境  | 阿里云Centos7  |\r\n\r\n#### 结构设计\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)\r\n对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。\r\n\r\n## 业务设计\r\n#### 发布文章流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)\r\n\r\n#### 登录流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)\r\n\r\n#### 用户个人资料修改流程\r\n\r\n![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)\r\n\r\n## 打包、部署和运行\r\n- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar\r\n- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志\r\n\r\n## 数据设计\r\n\r\n###### 用户表：user\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| phone  | varchar  | 255  | false  | true  | 手机号  |\r\n| username  | varchar  | 255  |  false | true  |  用户名 |\r\n| password  |  varchar |  255 |  false | true  | 密码  |\r\n| gender  | char  | 50  | false  |  true | 性别  |\r\n| trueName  | varchar  | 255  |  false | false  | 姓名  |\r\n| birthday  |  char | 100  |  false | false  | 生日  |\r\n| email  | varchar  | 255  | false  | false  | 邮箱  |\r\n| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |\r\n| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |\r\n| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |\r\n\r\n###### 文章表：article\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | int  |  11 |  true |  true | 主键，自增  |\r\n| articleId  | bigint  | 20  | false  | true  | 文章id  |\r\n| author  | varchar  | 255  |  false | true  |  作者 |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |\r\n| articleContent  | longtext  | 0  |  false | true  | 文章内容  |\r\n| articleTags  |  varchar | 255  |  false | true  | 文章标签  |\r\n| articleType  | varchar  | 255  | false  | true  | 文章类型  |\r\n| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |\r\n| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |\r\n| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |\r\n| articleUrl  | varchar  |  255 |  false | true  |  文章url |\r\n| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |\r\n| likes  | int  |  11 |  false | true  |  文章喜欢数 |\r\n| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |\r\n| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |\r\n\r\n###### 评论记录表：comment_record\r\n| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |\r\n| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |\r\n| id  | bigint  |  20 |  true |  true | 主键，自增  |\r\n| pId  | bigint  | 20  | false  | true  | 父id  |\r\n| articleId  | bigint  | 20  |  false | true  |  文章id |\r\n| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |\r\n| answererId  | int  | 11  | false  |  true | 评论者id  |\r\n| respondentId  | int  | 11  |  false | true  | 被评论者id  |\r\n| commentDate  |  varchar | 100  |  false | true  | 评论日期  |\r\n| likes  | int  | 11  | false  | true  | 评论点赞数  |\r\n| commentContent  |  text | 0  | false  | true  |  评论内容 |\r\n\r\n## 开发流程\r\n###### 数据库CRUD\r\n- controller层中编写前端接口，接收前端参数\r\n- service层中编写所需业务接口，供controller层调用\r\n- 实现service层中的接口，并注入mapper层中的sql接口\r\n- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句\r\n- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的\r\n- 本项目开发并不是很难，只是在业务的实现上比较复杂\r\n\r\n###### 页面与展示\r\n- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ \"妹子UI主题\")，极大的减少了页面的开发难度，特此感谢\r\n- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。\r\n- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面\r\n\r\n###### 其他功能\r\n- 使用lazyload插件实现页面图片懒加载\r\n- 后台实时记录当天访客量，便于了解博客日常访问量\r\n- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存\r\n- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助\r\n\r\n###### 网站建设\r\n- 服务器选用的是阿里云centos7\r\n- 域名是阿里云上购买的.cn的域名\r\n- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。\r\n- 网站配置了安全证书，可实现https访问以及自动从http跳转到https\r\n\r\n## 总结\r\n#### 开发中遇到的难点\r\n- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处\r\n- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库\r\n- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ \"妹子UI\")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式\r\n\r\n#### 博客网站优缺点\r\n- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug\r\n- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈\r\n- 后端部分明确的分工有利于项目的理解与维护\r\n\r\n#### 项目整体优化\r\n- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间\r\n- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险\r\n- 写文章部分目前仅支持插入网络图片，无法从本地上传图片\r\n- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程\r\n\r\n#### 未来需增加的功能\r\n- 增加文章分享至QQ、微信、微博中功能\r\n- 用户可在线写文章功能\r\n- 用户收藏文章功能\r\n\r\n#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*\r\n\r\n> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', '2020-02-26 22:27:17', '2020-02-26 22:27:17', 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...', 0);
INSERT INTO `article` VALUES (213, 1586763307, '夏末', '夏末', '博客', '# 博客\n博客', '博客', '原创', '博客', '2020-04-13 15:35:08', '2020-04-13 15:35:08', 'https://www.jzh.plus/article/1586763307', '博客博客...', 0);

-- ----------------------------
-- Table structure for category
-- ----------------------------
DROP TABLE IF EXISTS `category`;
CREATE TABLE `category`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `category_name` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '分类名',
  `create_time` datetime(0) NOT NULL COMMENT '创建时间',
  `update_time` datetime(0) NOT NULL COMMENT '更新时间',
  `deleted` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 20 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '文章分类' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of category
-- ----------------------------
INSERT INTO `category` VALUES (1, 'SpringBoot', '2020-02-19 19:26:48', '2020-02-19 19:26:48', 0);
INSERT INTO `category` VALUES (2, '我的故事', '2020-02-19 19:26:48', '2020-02-19 19:26:48', 0);
INSERT INTO `category` VALUES (3, '测试', '2020-02-27 11:27:33', '2020-02-27 11:27:33', 0);
INSERT INTO `category` VALUES (4, '测试2', '2020-02-27 11:27:33', '2020-02-27 11:27:33', 0);
INSERT INTO `category` VALUES (5, '测试3', '2020-02-27 11:27:33', '2020-02-27 11:27:33', 1);
INSERT INTO `category` VALUES (6, '测试4', '2020-02-27 11:27:33', '2020-02-27 11:27:33', 1);
INSERT INTO `category` VALUES (7, '测试5', '2020-02-27 11:27:33', '2020-02-27 11:27:33', 1);
INSERT INTO `category` VALUES (8, '测试啊', '2020-03-02 19:39:48', '2020-03-02 19:39:48', 1);
INSERT INTO `category` VALUES (9, '顶替', '2020-03-02 19:41:07', '2020-03-02 19:41:07', 1);
INSERT INTO `category` VALUES (10, '顶替械', '2020-03-02 19:51:11', '2020-03-02 19:51:11', 1);
INSERT INTO `category` VALUES (15, '顶替村', '2020-03-02 20:05:21', '2020-03-02 20:05:21', 1);
INSERT INTO `category` VALUES (16, '基本面', '2020-03-02 20:06:35', '2020-03-02 20:06:35', 1);
INSERT INTO `category` VALUES (17, '顶替顶替', '2020-03-02 20:10:51', '2020-03-02 20:10:51', 1);
INSERT INTO `category` VALUES (20, '博客', '2020-04-13 15:27:12', '2020-04-13 15:27:12', 0);

-- ----------------------------
-- Table structure for feedback
-- ----------------------------
DROP TABLE IF EXISTS `feedback`;
CREATE TABLE `feedback`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `feedback_name` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '反馈人',
  `feedback_content` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '反馈内容',
  `contact_info` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '联系方式',
  `create_time` datetime(0) NOT NULL,
  `update_time` datetime(0) NOT NULL,
  `deleted` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 16 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '反馈' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of feedback
-- ----------------------------
INSERT INTO `feedback` VALUES (1, 'qqq', 'sdf', '813997065@qq.com', '2020-03-11 14:18:54', '2020-03-11 14:18:54', 0);
INSERT INTO `feedback` VALUES (2, 'aa', 'as', '813997065@qq.com', '2020-03-11 14:21:45', '2020-03-11 14:21:45', 0);
INSERT INTO `feedback` VALUES (3, 'qqq', 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaasdfdsdfsdfsdaxcasdcccccccccaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa', '813997065@qq.com', '2020-03-11 14:24:21', '2020-03-11 14:24:21', 0);
INSERT INTO `feedback` VALUES (4, '测试', '测试下', 'test@123.com', '2020-03-17 18:57:26', '2020-03-17 18:57:26', 0);
INSERT INTO `feedback` VALUES (5, 'qqq', 'asdsdsdsd', 'ff@qq.com', '2020-03-17 20:06:43', '2020-03-17 20:06:43', 0);
INSERT INTO `feedback` VALUES (6, '夏末', '来啦来啦', '813997065@qq.com', '2020-03-17 20:07:48', '2020-03-17 20:07:48', 0);
INSERT INTO `feedback` VALUES (7, 'test', 'test', '8134433454@qq.com', '2020-04-13 16:09:08', '2020-04-13 16:09:08', 0);
INSERT INTO `feedback` VALUES (8, '1', '1', '813997065@qq.com', '2020-04-18 18:13:09', '2020-04-18 18:13:09', 0);
INSERT INTO `feedback` VALUES (9, '1', '1', '813997065@qq.com', '2020-04-18 18:15:52', '2020-04-18 18:15:52', 0);
INSERT INTO `feedback` VALUES (10, '1', '1', '813997065@qq.com', '2020-04-18 18:16:24', '2020-04-18 18:16:24', 0);
INSERT INTO `feedback` VALUES (11, '1', '1', '813997065@qq.com', '2020-04-18 18:25:38', '2020-04-18 18:25:38', 0);
INSERT INTO `feedback` VALUES (12, '1', '1', '813997065@qq.com', '2020-04-18 21:07:45', '2020-04-18 21:07:45', 0);
INSERT INTO `feedback` VALUES (13, '1', '1', '813997065@qq.com', '2020-04-18 21:13:31', '2020-04-18 21:13:31', 0);
INSERT INTO `feedback` VALUES (14, 'qqq', '1', '813997065@qq.com', '2020-04-18 21:14:58', '2020-04-18 21:14:58', 0);
INSERT INTO `feedback` VALUES (15, 'qqq', '1', '813997065@qq.com', '2020-04-18 21:16:25', '2020-04-18 21:16:25', 0);
INSERT INTO `feedback` VALUES (16, 'qqq', '123', '813997065@qq.com', '2020-04-18 21:36:16', '2020-04-18 21:36:16', 0);

-- ----------------------------
-- Table structure for friendlink
-- ----------------------------
DROP TABLE IF EXISTS `friendlink`;
CREATE TABLE `friendlink`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `blogger` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '博主',
  `head_img` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '头像url',
  `url` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '博主url',
  `introduction` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '这家伙很懒，什么也没有留下' COMMENT '简介',
  `create_time` datetime(0) NOT NULL COMMENT '创建时间',
  `update_time` datetime(0) NOT NULL COMMENT '更新时间',
  `deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 18 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '友情链接' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of friendlink
-- ----------------------------
INSERT INTO `friendlink` VALUES (11, '程序猿张先森', 'http://seaguller.oss-cn-beijing.aliyuncs.com/static/friends/zhy.png', 'https://zhyocean.cn/', '愿有人是你的归途', '2020-03-02 22:21:43', '2020-03-02 22:32:37', 0);
INSERT INTO `friendlink` VALUES (15, 'a', 'https://oss.jzh.plus/xiamo.jpg', 'https://www.jzh.plus', '', '2020-03-28 20:44:11', '2020-03-28 20:44:11', 1);
INSERT INTO `friendlink` VALUES (16, 'as', 'https://oss.jzh.plus/xiamo.jpg', 'https://www.jzh.plus', '这家伙很懒，什么也没有留下', '2020-03-28 21:08:21', '2020-03-28 21:08:21', 1);
INSERT INTO `friendlink` VALUES (17, 'as', 'https://oss.jzh.plus/xiamo.jpg', 'https://www.jzh.plus', '这家伙很懒，什么也没有留下', '2020-03-28 21:08:21', '2020-03-28 21:08:21', 1);
INSERT INTO `friendlink` VALUES (18, 'as', 'https://oss.jzh.plus/xiamo.jpg', 'https://www.jzh.plus', '这家伙很懒，什么也没有留下', '2020-03-28 21:08:21', '2020-03-28 21:08:21', 1);

-- ----------------------------
-- Table structure for role
-- ----------------------------
DROP TABLE IF EXISTS `role`;
CREATE TABLE `role`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '权限名',
  `create_time` datetime(0) NOT NULL,
  `update_time` datetime(0) NOT NULL,
  `deleted` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 3 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '权限' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of role
-- ----------------------------
INSERT INTO `role` VALUES (1, 'ROLE_USER', '2020-02-10 11:30:49', '2020-02-10 11:30:49', 0);
INSERT INTO `role` VALUES (2, 'ROLE_ADMIN', '2020-02-10 11:30:49', '2020-02-10 11:30:49', 0);
INSERT INTO `role` VALUES (3, 'ROLE_SUPERADMIN', '2020-02-10 11:30:49', '2020-02-10 11:30:49', 0);

-- ----------------------------
-- Table structure for tag
-- ----------------------------
DROP TABLE IF EXISTS `tag`;
CREATE TABLE `tag`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tag_name` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '标签名',
  `create_time` datetime(0) NOT NULL,
  `update_time` datetime(0) NOT NULL,
  `deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 83 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '标签' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of tag
-- ----------------------------
INSERT INTO `tag` VALUES (70, '测试1', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (71, '测试2', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (72, '测试3', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (73, '测试4', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (74, '测试5', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (75, '测试6', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (76, '测试7', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (77, '测试8', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (78, '测试9', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (79, '测试10', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (80, '测试11', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (81, '测试12', '2020-02-27 15:59:19', '2020-02-27 15:59:19', 0);
INSERT INTO `tag` VALUES (82, '测试', '2020-03-03 20:58:21', '2020-03-03 20:58:21', 0);
INSERT INTO `tag` VALUES (83, '博客', '2020-04-13 15:35:08', '2020-04-13 15:35:08', 0);

-- ----------------------------
-- Table structure for test
-- ----------------------------
DROP TABLE IF EXISTS `test`;
CREATE TABLE `test`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 17 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of test
-- ----------------------------
INSERT INTO `test` VALUES (1, '1sdfsdfsdf');
INSERT INTO `test` VALUES (2, '2');
INSERT INTO `test` VALUES (3, '3');
INSERT INTO `test` VALUES (4, '4');
INSERT INTO `test` VALUES (5, '5');
INSERT INTO `test` VALUES (6, '6');
INSERT INTO `test` VALUES (7, '7');
INSERT INTO `test` VALUES (8, '8');
INSERT INTO `test` VALUES (9, '9');
INSERT INTO `test` VALUES (10, '10');
INSERT INTO `test` VALUES (11, '11');
INSERT INTO `test` VALUES (12, '12');
INSERT INTO `test` VALUES (13, '13');
INSERT INTO `test` VALUES (14, '14');
INSERT INTO `test` VALUES (15, '15');
INSERT INTO `test` VALUES (16, '16');
INSERT INTO `test` VALUES (17, '17');

-- ----------------------------
-- Table structure for user
-- ----------------------------
DROP TABLE IF EXISTS `user`;
CREATE TABLE `user`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(11) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '用户名（手机号）',
  `password` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '密码',
  `gender` tinyint(1) NOT NULL DEFAULT 1 COMMENT '性别',
  `nickname` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '昵称',
  `real_name` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '真实姓名',
  `birthday` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '生日',
  `email` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '邮箱',
  `personal_brief` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '这家伙很懒，什么也没有留下' COMMENT '个人简介',
  `avatar_img_url` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '头像地址',
  `recently_landed_time` datetime(0) NULL DEFAULT NULL COMMENT '最后登录时间',
  `create_time` datetime(0) NOT NULL,
  `update_time` datetime(0) NOT NULL,
  `deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '用户实体类' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of user
-- ----------------------------
INSERT INTO `user` VALUES (1, '18988888888', '$2a$10$TkSfXy0tyRRrIw7w6HZREuqTk18hqu27csxbMnVr.RaR5KQ92Q9tO', 1, '夏末', 'jzh', '1998-12-25', '813997065@qq.com', '这家伙很懒，什么也没有留下', 'https://oss.jzh.plus/xiamo.jpg', '2020-04-26 18:19:57', '2020-02-10 11:37:09', '2020-03-27 14:44:30', 0);

-- ----------------------------
-- Table structure for user_role
-- ----------------------------
DROP TABLE IF EXISTS `user_role`;
CREATE TABLE `user_role`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `role_id` int(11) NOT NULL,
  `create_time` datetime(0) NOT NULL,
  `update_time` datetime(0) NOT NULL,
  `deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 3 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '用户权限关联表' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of user_role
-- ----------------------------
INSERT INTO `user_role` VALUES (1, 1, 1, '2020-02-29 14:06:19', '2020-02-29 14:06:19', 0);
INSERT INTO `user_role` VALUES (2, 1, 2, '2020-02-29 14:06:19', '2020-02-29 14:06:19', 0);
INSERT INTO `user_role` VALUES (3, 1, 3, '2020-02-29 14:06:19', '2020-02-29 14:06:19', 0);

-- ----------------------------
-- Table structure for visitor
-- ----------------------------
DROP TABLE IF EXISTS `visitor`;
CREATE TABLE `visitor`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `visitor_num` bigint(20) NOT NULL DEFAULT 0 COMMENT '访客人数',
  `page_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '当前页的name or 文章名',
  `create_time` datetime(0) NOT NULL,
  `update_time` datetime(0) NOT NULL,
  `deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `uk_page_name`(`page_name`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 9 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '访客' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of visitor
-- ----------------------------
INSERT INTO `visitor` VALUES (1, 3228, 'totalVisitor', '2020-02-10 11:47:56', '2020-02-10 11:48:06', 0);
INSERT INTO `visitor` VALUES (2, 1000, 'visitorVolume', '2020-02-10 11:48:06', '2020-02-10 11:48:06', 0);
INSERT INTO `visitor` VALUES (3, 42, 'article/1532884460', '2020-02-10 11:48:06', '2020-02-10 11:48:06', 0);
INSERT INTO `visitor` VALUES (5, 57, 'article/1533196734', '2020-02-10 11:48:06', '2020-02-10 11:48:06', 0);
INSERT INTO `visitor` VALUES (6, 0, 'test', '2020-03-01 13:18:44', '2020-03-01 13:18:44', 0);
INSERT INTO `visitor` VALUES (7, 0, '2020-03-02', '2020-03-02 15:43:20', '2020-03-02 15:43:20', 0);
INSERT INTO `visitor` VALUES (8, 0, 'article/1583240300', '2020-03-03 20:58:21', '2020-03-03 20:58:21', 0);
INSERT INTO `visitor` VALUES (9, 0, 'article/1586763307', '2020-04-13 15:35:07', '2020-04-13 15:35:07', 0);

-- ----------------------------
-- Procedure structure for insert_article
-- ----------------------------
DROP PROCEDURE IF EXISTS `insert_article`;
delimiter ;;
CREATE PROCEDURE `insert_article`(IN n INTEGER)
BEGIN
    DECLARE i int DEFAULT 1;
    WHILE i < n DO
        INSERT INTO `article` (article_id, author, original_author, article_title, article_content, article_tags, article_type, article_categories, create_time, update_time, article_url, article_tabloid)
				VALUES (rand_strings(10), '夏末', '张海洋', 'SpringBoot之从零搭建博客网站', '![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/IMG_5015.JPG)
> 文字不够，图片来凑。

## 前言
#### 为什么想要搭建这个博客？
我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子...

于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~

就这样一直拖了大概有3个月，某天我才意识到我好像有件很重要的事没完成，就是这么的突然，毫无准备的就开始了博客的搭建。

自己在本子上设计了网站的所有页面的大致样式(也借鉴了许多大佬的博客样式，哈哈，我承认我审美不是很好)，列出了应该有的功能，当时看来并不算多，也给自己定了一个目标期限，在7月5日之前上线，不错有了目标也就有了动力，就这么开始干了。

一件事情在开头总是想的很美好，然而事实总会跟你对着干。在博客搭建的过程中遇到了无数多的前端页面设计bug，我在此之前也可以算的上是个前端小小白，很是无奈，不过还是要在这里感谢翼灵工作室里帮我解决了许多bug的波波、田小宇和杨小卿，没有你们估计我的博客还得推迟半年才能上线吧，O(∩_∩)O哈哈~

6、7月也恰好是考试月，堆积在一起的无数们考试如暴风雨一样一夜袭来，一学期欠的帐总该还了，不得不放下手中的网站专心去备考，于是乎，完美的错过了本该上线的时间。

> 编程是个脑力活，如果把它做成了体力活，这就代表是时候改变一下了

#### 文章概述
- 关于项目，对于学习Springboot是个挺不错的练手项目，可以让你在烦恼的业务逻辑中保持一颗纯洁的心
- 如何从零开始，使用Springboot开发项目
- 开发前的一些准备工作，以及思考项目整体结构与思路
- 记录开发过程中遇到的一些难题以及bug
- 总结目前博客网站的一些优缺点
- 思考整个项目有哪些可以优化的地方，以及有哪些可增加的功能

## 页面展示

##### 首页展示
![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120610.png)
<br>
##### 文章编辑
![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802120611.png)
<br>
##### 后台管理
![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121241.png)
<br>
##### 用户个人中心
![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802121749.png)

## 项目需求
#### 项目背景
对于初学Springboot的朋友来说，最好的一个学习方式就是那一个功能俱全的项目来练练手，通过自己重构项目来发现其中的潜在难题，并且也能很好的在编码过程中总结和发现问题、解决问题。使用Springboot开发的博客系统，简单并且实用，适合做练手项目。

#### 功能需求
###### 主页
- 博客汇总，以列表形式展示文章，并附上文章作者、发布日期、分类情况以及文章简要

- 能够以分类形式查看文章

- 能够以时间列表方式归档文章

- 可实现通过标签查找所有相关文章

- 个人介绍、联系方式

- 博客网站更新记录

- 友链链接

###### 后台管理
- 网站仪表盘，记录网站访客量情况

- 文章管理
1.分页展示文章信息
2.可对文章进行再编辑以及删除文章

- 发布文章
1.使用markdown编辑器，支持插入代码，插入图片等功能
2.文章可选择分类和标签，以及转载文章支持链接原作者文章

- 分类管理，支持增加、删除、修改分类

- 友情链接
1.支持增加友情链接
2.支持删除友情链接

- 反馈信息管理，可查看用户反馈信息

#### 安装部署需求
- 可以使用docker方式部署，也可支持-jar方式
- 使用springboot自带方式打包

#### 非功能需求
##### 性能需求
- 首页响应时间不超过2秒钟
- 文章页响应时间不超过3秒钟

## 项目设计

#### 总体设计
- **本项目用到的技术和框架**
1.项目构建：Maven
2.web框架：Springboot
3.数据库ORM：Mybatis
4.数据库连接池： HikariCP 
5.分页插件：PageHelper
6.数据库：MySql
7.缓存：Redis
8.前端模板：Thymeleaf
9.文章展示：Editor.md

- **本项目中的关键点**
1.采用Springboot开发，数据库使用连接池加orm框架的模式，对于系统的关键业务使用Redis缓存，加快相应速度。
2.整体系统采用门户网站+后台管理+用户个人中心的方式搭建，门户网站展示博客内容以及博主介绍，后台管理用于编辑文章，查看反馈，管理评论留言。
3.使用阿里云OSS进行静态资源存储，以及CDN全站加速。

- **环境**

|  工具 | 名称  |
| ------------ | ------------ |
| 开发工具  | IDEA  |
|  语言 | JDK1.8、HTML、css、js  |
| 数据库  | Mysql5.6  |
| 项目框架  | SSM  |
| ORM  | Mybatis  |
| 安全框架  | SpringSecurity  |
| 缓存  | Redis  |
| 项目构建  | Maven  |
| 运行环境  | 阿里云Centos7  |

#### 结构设计

![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802140136.png)
对于熟悉Spring开发的朋友来说，相信对此结构也不会陌生。平时的开发过程中，结构设计是重要的环节，特别是协作开发的时候，明细的分包，模块化，可减少代码提交时的冲突。并且明确的结构有助于我们快速的寻找所对应的类。

## 业务设计
#### 发布文章流程

![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802141221.png)

#### 登录流程

![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/201808021412271.png)

#### 用户个人资料修改流程

![](https://zhy-myblog.oss-cn-shenzhen.aliyuncs.com/public/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/SpringBoot%E4%B9%8B%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/20180802143230.png)

## 打包、部署和运行
- 本项目采用Springboot的maven插件进行打包，打包结果：****.jar
- 部署方式：使用 nohup java -jar ******.jar >******.log 2>&1 &的方式，后台启动项目，并在该路径下生成运行日志

## 数据设计

###### 用户表：user
| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| id  | int  |  11 |  true |  true | 主键，自增  |
| phone  | varchar  | 255  | false  | true  | 手机号  |
| username  | varchar  | 255  |  false | true  |  用户名 |
| password  |  varchar |  255 |  false | true  | 密码  |
| gender  | char  | 50  | false  |  true | 性别  |
| trueName  | varchar  | 255  |  false | false  | 姓名  |
| birthday  |  char | 100  |  false | false  | 生日  |
| email  | varchar  | 255  | false  | false  | 邮箱  |
| personalBrief  |  varchar | 255  | false  | false  |  个人简介 |
| avatarImgUrl  |  varchar |  255 | false  |  true | 头像url |
| recentlyLanded  | varchar  |  255 |  false | false  |  最近登录时间 |

###### 文章表：article
| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| id  | int  |  11 |  true |  true | 主键，自增  |
| articleId  | bigint  | 20  | false  | true  | 文章id  |
| author  | varchar  | 255  |  false | true  |  作者 |
| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |
| articleTitle  | varchar  | 255  | false  |  true | 文章标题  |
| articleContent  | longtext  | 0  |  false | true  | 文章内容  |
| articleTags  |  varchar | 255  |  false | true  | 文章标签  |
| articleType  | varchar  | 255  | false  | true  | 文章类型  |
| articleCategories  |  varchar | 255  | false  | true  |  文章分类 |
| publishDate  |  varchar |  255 | false  |  true | 发布文章日期 |
| updateDate  | varchar  |  255 |  false | true  |  更新文章日期 |
| articleUrl  | varchar  |  255 |  false | true  |  文章url |
| articleTabloid  | 0  |  255 |  false | true  |  文章摘要 |
| likes  | int  |  11 |  false | true  |  文章喜欢数 |
| lastArticleId  | bigint  |  20 |  false | false  |  上一篇文章id |
| nextArticleId  | bigint  |  20 |  false | false  |  下一篇文章id |

###### 评论记录表：comment_record
| 名称  | 类型  |  长度 |  主键 | 非空  | 描述  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| id  | bigint  |  20 |  true |  true | 主键，自增  |
| pId  | bigint  | 20  | false  | true  | 父id  |
| articleId  | bigint  | 20  |  false | true  |  文章id |
| originalAuthor  |  varchar |  255 |  false | true  | 文章原作者  |
| answererId  | int  | 11  | false  |  true | 评论者id  |
| respondentId  | int  | 11  |  false | true  | 被评论者id  |
| commentDate  |  varchar | 100  |  false | true  | 评论日期  |
| likes  | int  | 11  | false  | true  | 评论点赞数  |
| commentContent  |  text | 0  | false  | true  |  评论内容 |

## 开发流程
###### 数据库CRUD
- controller层中编写前端接口，接收前端参数
- service层中编写所需业务接口，供controller层调用
- 实现service层中的接口，并注入mapper层中的sql接口
- 采用Mybatis的JavaConfig方式编写Sql语句。由于并没有使用Mybatis的逆向功能，需要自己手写所有sql语句
- 关于事务的实现，在启动类中开启事务，并在service层需要实现事务的业务接口上使用`@Transactional`注解，还是十分方便的
- 本项目开发并不是很难，只是在业务的实现上比较复杂

###### 页面与展示
- 作为一名后端开发，对于css的功力有所欠缺，这里我使用了[妹子UI主题](http://amazeui.org/ "妹子UI主题")，极大的减少了页面的开发难度，特此感谢
- 前端页面与后端的交互主要是在controller包中，并使用Thymeleaf渲染页面。
- 自定义异常处理页面，通过重写`WebMvcConfigurerAdapter`实现自动跳转到404、403页面

###### 其他功能
- 使用lazyload插件实现页面图片懒加载
- 后台实时记录当天访客量，便于了解博客日常访问量
- 分析访问量最多的数据，主要在于文章访问部分，将文章放入redis缓存。每次编辑完文章后，更新缓存
- 使用阿里云互联网中间件的业务实时监控服务，对于网站性能的了解以及优化有很大的帮助

###### 网站建设
- 服务器选用的是阿里云centos7
- 域名是阿里云上购买的.cn的域名
- 网站备案以及公安机关备案，后者备案时间较短但是那个备案网站经常挂掉，所以公安机关备案还得看运气。而网站备案时间就比较长了，按照阿里云的流程走大概1个月左右时间，需要上传个人身份信息以及邮寄个人资料过去。
- 网站配置了安全证书，可实现https访问以及自动从http跳转到https

## 总结
#### 开发中遇到的难点
- 要实现在一个页面进行权限验证，如果验证不成功会跳转到登录界面，并且登录成功后还要返回到之前界面，这里由于对SpringSecurity内部原理的不了解，所以我这里采用的方法是利用请求头和响应头存储url，并在登录成功后的页面出跳转到响应头中存储的url处
- 上传头像处使用上传头像至阿里云的OSS对象存储中，由于上传问题并没有返回上传成功后的图片url地址，于是只好设置OSS的Bucket为公共读权限，然后当上传成功后手动拼接图片url并存入数据库
- 项目中最大的难点还是莫过于页面css的设计，但是使用了[妹子UI](http://amazeui.org/ "妹子UI")后极大的解决了这个问题，只需修改少量css就能实现自己所需要的样式

#### 博客网站优缺点
- 首先最大的一个缺点就是在前端页面设计过程中混用了一些Bootstrap，导致依赖过于复杂，不便于后期修改，已经网站上有一些隐藏的bug
- 对于页面用户体验以及反馈功能的设计便于用户对于浏览过程中出现的问题进行反馈
- 后端部分明确的分工有利于项目的理解与维护

#### 项目整体优化
- 目前项目首页以及文章页响应时间过长，后期最好优化到1s响应时间
- 定时定期进行数据库的备份，防止出现网站被攻击后数据丢失的风险
- 写文章部分目前仅支持插入网络图片，无法从本地上传图片
- 手机端浏览文章页面会出现代码自动换行问题，不便于浏览过程

#### 未来需增加的功能
- 增加文章分享至QQ、微信、微博中功能
- 用户可在线写文章功能
- 用户收藏文章功能

#### *以上就是我在博客网站搭建过程后的所有总结记录，可能会有遗缺部分，等以后想起来了再来修改吧。*

> 本人秉持开源原则，待后期网站功能完善之后会同步源码至Github、码云中。需要搭建个人博客的朋友欢迎使用本博客，只要给我个stars就好啦，哈哈。如果搭建过程中有各种问题欢迎来骚。', 'SpringBoot,个人博客,原创', '转载', 'SpringBoot', NOW(), NOW(), 'https://www.zhyocean.cn/article/1533196734', '文字不够，图片来凑。前言为什么想要搭建这个博客？我还记得，在大二寒假的某天，同往常一样的在家解决这某个bug，不停地问度娘，很巧的碰到了一个同行在他的博客中完美的记录了我的bug的解决方案，随后我又看了看他写的其他博客文章，觉得都非常的不错，并且同时也被他博客网站的简约清新吸引，也就在那刻，心中埋下了准备自己搭建myblog的种子…于是在寒假的时候我就开始了Bootstrap了的学习，然后好像也并没有什么卵用，因为还是不会用~~~...');
        SET i = i + 1;
    END WHILE;
END
;;
delimiter ;

-- ----------------------------
-- Procedure structure for insert_tags
-- ----------------------------
DROP PROCEDURE IF EXISTS `insert_tags`;
delimiter ;;
CREATE PROCEDURE `insert_tags`(IN n INTEGER)
BEGIN
    DECLARE i int DEFAULT 1;
    WHILE i < n DO
        INSERT INTO `tags` (tag_name, create_time, update_time)
				VALUES (CONCAT('测试',i), NOW(), NOW());
        SET i = i + 1;
    END WHILE;
END
;;
delimiter ;

SET FOREIGN_KEY_CHECKS = 1;
